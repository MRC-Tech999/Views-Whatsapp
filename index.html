<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Voir le code source d'un site</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
            background-color: #f9f9f9;
        }
        input {
            width: 300px;
            padding: 10px;
            margin-right: 10px;
        }
        button {
            padding: 10px 15px;
        }
        pre {
            background-color: #efefef;
            padding: 15px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <h1>Voir le code source d'un site</h1>
    <form method="POST">
        <input type="text" name="url" placeholder="https://exemple.com" required>
        <button type="submit">Afficher</button>
    </form>

    <?php
    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $url = filter_var($_POST['url'], FILTER_VALIDATE_URL);
        if ($url) {
            $options = [
                "http" => [
                    "method" => "GET",
                    "header" => "User-Agent: PHP"
                ]
            ];
            $context = stream_context_create($options);
            $html = @file_get_contents($url, false, $context);
            if ($html !== false) {
                echo "<h2>Code source de : {$url}</h2>";
                echo "<pre>" . htmlspecialchars($html) . "</pre>";
            } else {
                echo "<p style='color:red;'>Erreur lors de la récupération du code source.</p>";
            }
        } else {
            echo "<p style='color:red;'>URL invalide.</p>";
        }
    }
    ?>
</body>
</html>
